
<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="900" viewBox="0 0 1400 900">
  <style>
    .title { font: bold 28px Arial, sans-serif; }
    .subtitle { font: 16px Arial, sans-serif; fill: #333; }
    .box { fill: #f9fafb; stroke: #111827; stroke-width: 1.5; }
    .box-accent { fill: #eef2ff; stroke: #3730a3; stroke-width: 1.5; }
    .db { fill: #ecfeff; stroke: #0e7490; stroke-width: 1.5; }
    .queue { fill: #fff7ed; stroke: #9a3412; stroke-width: 1.5; }
    .ext { fill: #fef3c7; stroke: #92400e; stroke-width: 1.5; stroke-dasharray: 6 4; }
    .label { font: 14px Arial, sans-serif; fill: #111827; }
    .small { font: 12px Arial, sans-serif; fill: #374151; }
    .arrow { stroke: #374151; stroke-width: 1.6; marker-end: url(#arrowhead); fill: none; }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="30" y="50" class="title">Game Space Manager — MVP Architecture</text>
  <text x="30" y="80" class="subtitle">NestJS · GraphQL · MongoDB · Redis (Queues/Cache) · Docker</text>

  <!-- Client Layer -->
  <rect x="30" y="120" width="380" height="170" class="box"/>
  <text x="50" y="150" class="label">Client Layer</text>
  <text x="50" y="175" class="small">• Admin Web (Back-office)</text>
  <text x="50" y="195" class="small">• Staff Tablet (Kiosk/Front Desk)</text>
  <text x="50" y="215" class="small">• Customer Portal (Reservations)</text>
  <text x="50" y="235" class="small">• Auth via JWT (login)</text>

  <!-- API Gateway (NestJS GraphQL) -->
  <rect x="460" y="120" width="420" height="300" rx="6" class="box-accent"/>
  <text x="480" y="150" class="label">API Gateway (NestJS + GraphQL)</text>
  <text x="480" y="175" class="small">• GraphQL Schema (Queries/Mutations/Subscriptions)</text>
  <text x="480" y="195" class="small">• Auth Guard (JWT), RBAC</text>
  <text x="480" y="215" class="small">• Validation Pipes, Exception Filters</text>

  <!-- Domain Modules inside API -->
  <rect x="480" y="230" width="180" height="80" class="box"/>
  <text x="490" y="255" class="small">Booking Module</text>
  <text x="490" y="275" class="small">• reserve/cancel</text>

  <rect x="680" y="230" width="180" height="80" class="box"/>
  <text x="690" y="255" class="small">Session Module</text>
  <text x="690" y="275" class="small">• check-in/out, extend</text>

  <rect x="480" y="320" width="180" height="80" class="box"/>
  <text x="490" y="345" class="small">Resource Module</text>
  <text x="490" y="365" class="small">• status & inventory</text>

  <rect x="680" y="320" width="180" height="80" class="box"/>
  <text x="690" y="345" class="small">Pricing Module</text>
  <text x="690" y="365" class="small">• base/peak rules</text>

  <!-- Data Layer -->
  <rect x="940" y="120" width="420" height="190" class="box"/>
  <text x="960" y="150" class="label">Data Layer</text>
  <rect x="960" y="170" width="180" height="120" class="db"/>
  <text x="970" y="195" class="small">MongoDB</text>
  <text x="970" y="215" class="small">• users, branches</text>
  <text x="970" y="235" class="small">• resources, bookings</text>
  <text x="970" y="255" class="small">• sessions, orders</text>

  <rect x="1160" y="170" width="180" height="120" class="queue"/>
  <text x="1170" y="195" class="small">Redis</text>
  <text x="1170" y="215" class="small">• BullMQ queues</text>
  <text x="1170" y="235" class="small">• cache / locks</text>

  <!-- Worker -->
  <rect x="940" y="340" width="400" height="150" class="box-accent"/>
  <text x="960" y="370" class="label">Background Worker (NestJS)</text>
  <text x="960" y="395" class="small">• reminders (session expiring)</text>
  <text x="960" y="415" class="small">• auto-release no-shows</text>
  <text x="960" y="435" class="small">• daily summary aggregation</text>

  <!-- Integrations -->
  <rect x="30" y="320" width="380" height="170" class="ext"/>
  <text x="50" y="350" class="label">External Integrations (Later / Optional)</text>
  <text x="50" y="375" class="small">• Payment Gateway (Stripe, bank)</text>
  <text x="50" y="395" class="small">• Email/SMS notifications</text>
  <text x="50" y="415" class="small">• Identity Provider (Keycloak)</text>

  <!-- Docker / Deployment -->
  <rect x="30" y="540" width="1330" height="300" class="box"/>
  <text x="50" y="570" class="label">Dockerized Deployment (docker-compose / k8s-ready)</text>

  <rect x="50" y="600" width="250" height="200" class="box"/>
  <text x="65" y="630" class="small">Container: api</text>
  <text x="65" y="650" class="small">• NestJS GraphQL</text>
  <text x="65" y="670" class="small">• Exposes /health</text>

  <rect x="330" y="600" width="250" height="200" class="box"/>
  <text x="345" y="630" class="small">Container: worker</text>
  <text x="345" y="650" class="small">• BullMQ consumers</text>
  <text x="345" y="670" class="small">• cron jobs</text>

  <rect x="610" y="600" width="250" height="200" class="box"/>
  <text x="625" y="630" class="small">Container: mongo</text>
  <text x="625" y="650" class="small">• persistent volume</text>

  <rect x="890" y="600" width="250" height="200" class="box"/>
  <text x="905" y="630" class="small">Container: redis</text>
  <text x="905" y="650" class="small">• queues / cache</text>

  <rect x="1170" y="600" width="170" height="200" class="box"/>
  <text x="1185" y="630" class="small">Container: mailhog</text>
  <text x="1185" y="650" class="small">• dev emails</text>

  <!-- Arrows -->
  <!-- Clients -> API -->
  <line x1="410" y1="205" x2="460" y2="205" class="arrow"/>
  <!-- API -> Mongo -->
  <line x1="880" y1="270" x2="960" y2="230" class="arrow"/>
  <!-- API -> Redis -->
  <line x1="880" y1="310" x2="1160" y2="230" class="arrow"/>
  <!-- Worker -> Mongo -->
  <line x1="1140" y1="410" x2="1050" y2="290" class="arrow"/>
  <!-- Worker -> Redis -->
  <line x1="1250" y1="410" x2="1250" y2="290" class="arrow"/>
  <!-- API <-> Worker (queue-based) -->
  <line x1="880" y1="350" x2="1160" y2="350" class="arrow"/>
  <text x="960" y="342" class="small">jobs / events</text>

</svg>
